(()=>{var e={409:(e,t,i)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){s(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,r=d(e);if(t){var n=d(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return p(this,i)}}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,adId:e.adId||null,sequence:e.sequence||null,apiFramework:e.apiFramework||null,universalAdId:{value:null,idRegistry:"unknown"},creativeExtensions:[]}}var f=["ADCATEGORIES","ADCOUNT","ADPLAYHEAD","ADSERVINGID","ADTYPE","APIFRAMEWORKS","APPBUNDLE","ASSETURI","BLOCKEDADCATEGORIES","BREAKMAXADLENGTH","BREAKMAXADS","BREAKMAXDURATION","BREAKMINADLENGTH","BREAKMINDURATION","BREAKPOSITION","CLICKPOS","CLICKTYPE","CLIENTUA","CONTENTID","CONTENTPLAYHEAD","CONTENTURI","DEVICEIP","DEVICEUA","DOMAIN","EXTENSIONS","GDPRCONSENT","IFA","IFATYPE","INVENTORYSTATE","LATLONG","LIMITADTRACKING","MEDIAMIME","MEDIAPLAYHEAD","OMIDPARTNER","PAGEURL","PLACEMENTTYPE","PLAYERCAPABILITIES","PLAYERSIZE","PLAYERSTATE","PODSEQUENCE","REGULATIONS","SERVERSIDE","SERVERUA","TRANSACTIONID","UNIVERSALADID","VASTVERSIONS","VERIFICATIONVENDORS"];function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[],n=y(e);for(var a in!t.ERRORCODE||i.isCustomCode||/^[0-9]{3}$/.test(t.ERRORCODE)||(t.ERRORCODE=900),t.CACHEBUSTING=k(Math.round(1e8*Math.random()).toString()),t.TIMESTAMP=(new Date).toISOString(),t.RANDOM=t.random=t.CACHEBUSTING,t)t[a]=N(t[a]);for(var o in n){var s=n[o];"string"==typeof s&&r.push(A(s,t))}return r}function A(e,t){var i=(e=T(e,t)).match(/[^[\]]+(?=])/g);if(!i)return e;var r=i.filter((function(e){return f.indexOf(e)>-1}));return 0===r.length?e:T(e,r=r.reduce((function(e,t){return e[t]=-1,e}),{}))}function T(e,t){var i=e;for(var r in t){var n=t[r];i=i.replace(new RegExp("(?:\\[|%%)(".concat(r,")(?:\\]|%%)"),"g"),n)}return i}function y(e){return Array.isArray(e)?e.map((function(e){return e&&e.hasOwnProperty("url")?e.url:e})):e}function E(e,t){for(var i=0;i<t.length;i++)if(b(t[i],e))return!0;return!1}function b(e,t){if(e&&t){var i=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);return i.length===r.length&&e.id===t.id&&e.url===t.url}return!1}function N(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16))}))}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,i=String(e);return i.length<t?C(0,t-i.length,!1).map((function(){return"0"})).join("")+i:i}function C(e,t,i){for(var r=[],n=e<t,a=i?n?t+1:t-1:t,o=e;n?o<a:o>a;n?o++:o--)r.push(o);return r}var _={track:function(e,t,i){g(e,t,i).forEach((function(e){"undefined"!=typeof window&&null!==window&&((new Image).src=e)}))},resolveURLTemplates:g,extractURLsFromTemplates:y,containsTemplateObject:E,isTemplateObjectEqual:b,encodeURIComponentRFC3986:N,replaceUrlMacros:A,leftpad:k,range:C,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},flatten:function e(t){return t.reduce((function(t,i){return t.concat(Array.isArray(i)?e(i):i)}),[])},joinArrayOfUniqueTemplateObjs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=Array.isArray(e)?e:[],r=Array.isArray(t)?t:[],n=i.concat(r);return n.reduce((function(e,t){return E(t,e)||e.push(t),e}),[])}};function R(e){return-1!==["true","TRUE","True","1"].indexOf(e)}var S={childByName:function(e,t){var i=e.childNodes;for(var r in i){var n=i[r];if(n.nodeName===t)return n}},childrenByName:function(e,t){var i=[],r=e.childNodes;for(var n in r){var a=r[n];a.nodeName===t&&i.push(a)}return i},resolveVastAdTagURI:function(e,t){if(!t)return e;if(0===e.indexOf("//")){var i=location.protocol;return"".concat(i).concat(e)}if(-1===e.indexOf("://")){var r=t.slice(0,t.lastIndexOf("/"));return"".concat(r,"/").concat(e)}return e},parseBoolean:R,parseNodeText:function(e){return e&&(e.textContent||e.text||"").trim()},copyNodeAttribute:function(e,t,i){var r=t.getAttribute(e);r&&i.setAttribute(e,r)},parseAttributes:function(e){for(var t=e.attributes,i={},r=0;r<t.length;r++)i[t[r].nodeName]=t[r].nodeValue;return i},parseDuration:function(e){if(null==e)return-1;if(_.isNumeric(e))return parseInt(e);var t=e.split(":");if(3!==t.length)return-1;var i=t[2].split("."),r=parseInt(i[0]);2===i.length&&(r+=parseFloat("0.".concat(i[1])));var n=parseInt(60*t[1]),a=parseInt(60*t[0]*60);return isNaN(a)||isNaN(n)||isNaN(r)||n>3600||r>60?-1:a+n+r},splitVAST:function(e){var t=[],i=null;return e.forEach((function(r,n){if(r.sequence&&(r.sequence=parseInt(r.sequence,10)),r.sequence>1){var a=e[n-1];if(a&&a.sequence===r.sequence-1)return void(i&&i.push(r));delete r.sequence}i=[r],t.push(i)})),t},assignAttributes:function(e,t){if(e)for(var i in e){var r=e[i];if(r.nodeName&&r.nodeValue&&t.hasOwnProperty(r.nodeName)){var n=r.nodeValue;"boolean"==typeof t[r.nodeName]&&(n=R(n)),t[r.nodeName]=n}}},mergeWrapperAdData:function(e,t){e.errorURLTemplates=t.errorURLTemplates.concat(e.errorURLTemplates),e.impressionURLTemplates=t.impressionURLTemplates.concat(e.impressionURLTemplates),e.extensions=t.extensions.concat(e.extensions),e.followAdditionalWrappers=t.followAdditionalWrappers,e.allowMultipleAds=t.allowMultipleAds,e.fallbackOnNoAd=t.fallbackOnNoAd;var i=(t.creatives||[]).filter((function(e){return e&&"companion"===e.type})),r=i.reduce((function(e,t){return(t.variations||[]).forEach((function(t){(t.companionClickTrackingURLTemplates||[]).forEach((function(t){_.containsTemplateObject(t,e)||e.push(t)}))})),e}),[]);e.creatives=i.concat(e.creatives);var n=t.videoClickTrackingURLTemplates&&t.videoClickTrackingURLTemplates.length,a=t.videoCustomClickURLTemplates&&t.videoCustomClickURLTemplates.length;e.creatives.forEach((function(e){if(t.trackingEvents&&t.trackingEvents[e.type])for(var i in t.trackingEvents[e.type]){var o=t.trackingEvents[e.type][i];Array.isArray(e.trackingEvents[i])||(e.trackingEvents[i]=[]),e.trackingEvents[i]=e.trackingEvents[i].concat(o)}"linear"===e.type&&(n&&(e.videoClickTrackingURLTemplates=e.videoClickTrackingURLTemplates.concat(t.videoClickTrackingURLTemplates)),a&&(e.videoCustomClickURLTemplates=e.videoCustomClickURLTemplates.concat(t.videoCustomClickURLTemplates)),!t.videoClickThroughURLTemplate||null!==e.videoClickThroughURLTemplate&&void 0!==e.videoClickThroughURLTemplate||(e.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate)),"companion"===e.type&&r.length&&(e.variations||[]).forEach((function(e){e.companionClickTrackingURLTemplates=_.joinArrayOfUniqueTemplateObjs(e.companionClickTrackingURLTemplates,r)}))})),t.adVerifications&&(e.adVerifications=e.adVerifications.concat(t.adVerifications)),t.blockedAdCategories&&(e.blockedAdCategories=e.blockedAdCategories.concat(t.blockedAdCategories))}};function w(e,t){var i=function(){var e=v(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=e.id,i=e.adId,r=e.sequence,n=e.apiFramework;return{id:t,adId:i,sequence:r,apiFramework:n,type:"companion",required:null,variations:[]}}(t);return i.required=e.getAttribute("required")||null,i.variations=S.childrenByName(e,"Companion").map((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,adType:"companionAd",width:e.width||0,height:e.height||0,assetWidth:e.assetWidth||null,assetHeight:e.assetHeight||null,expandedWidth:e.expandedWidth||null,expandedHeight:e.expandedHeight||null,apiFramework:e.apiFramework||null,adSlotID:e.adSlotID||null,pxratio:e.pxratio||"1",renderingMode:e.renderingMode||"default",staticResources:[],htmlResources:[],iframeResources:[],adParameters:null,xmlEncoded:null,altText:null,companionClickThroughURLTemplate:null,companionClickTrackingURLTemplates:[],trackingEvents:{}}}(S.parseAttributes(e));t.htmlResources=S.childrenByName(e,"HTMLResource").reduce((function(e,t){var i=S.parseNodeText(t);return i?e.concat(i):e}),[]),t.iframeResources=S.childrenByName(e,"IFrameResource").reduce((function(e,t){var i=S.parseNodeText(t);return i?e.concat(i):e}),[]),t.staticResources=S.childrenByName(e,"StaticResource").reduce((function(e,t){var i=S.parseNodeText(t);return i?e.concat({url:i,creativeType:t.getAttribute("creativeType")||null}):e}),[]),t.altText=S.parseNodeText(S.childByName(e,"AltText"))||null;var i=S.childByName(e,"TrackingEvents");i&&S.childrenByName(i,"Tracking").forEach((function(e){var i=e.getAttribute("event"),r=S.parseNodeText(e);i&&r&&(Array.isArray(t.trackingEvents[i])||(t.trackingEvents[i]=[]),t.trackingEvents[i].push(r))})),t.companionClickTrackingURLTemplates=S.childrenByName(e,"CompanionClickTracking").map((function(e){return{id:e.getAttribute("id")||null,url:S.parseNodeText(e)}})),t.companionClickThroughURLTemplate=S.parseNodeText(S.childByName(e,"CompanionClickThrough"))||null;var r=S.childByName(e,"AdParameters");return r&&(t.adParameters=S.parseNodeText(r),t.xmlEncoded=r.getAttribute("xmlEncoded")||null),t})),i}function I(e){return"linear"===e.type}function L(e,t){var i,r=function(){var e=v(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=e.id,i=e.adId,r=e.sequence,n=e.apiFramework;return{id:t,adId:i,sequence:r,apiFramework:n,type:"linear",duration:0,skipDelay:null,mediaFiles:[],mezzanine:null,interactiveCreativeFile:null,closedCaptionFiles:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],adParameters:null,icons:[],trackingEvents:{}}}(t);r.duration=S.parseDuration(S.parseNodeText(S.childByName(e,"Duration")));var n=e.getAttribute("skipoffset");if(null==n)r.skipDelay=null;else if("%"===n.charAt(n.length-1)&&-1!==r.duration){var a=parseInt(n,10);r.skipDelay=r.duration*(a/100)}else r.skipDelay=S.parseDuration(n);var o=S.childByName(e,"VideoClicks");if(o){var s=S.childByName(o,"ClickThrough");r.videoClickThroughURLTemplate=s?{id:s.getAttribute("id")||null,url:S.parseNodeText(s)}:null,S.childrenByName(o,"ClickTracking").forEach((function(e){r.videoClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:S.parseNodeText(e)})})),S.childrenByName(o,"CustomClick").forEach((function(e){r.videoCustomClickURLTemplates.push({id:e.getAttribute("id")||null,url:S.parseNodeText(e)})}))}var l=S.childByName(e,"AdParameters");l&&(r.adParameters=S.parseNodeText(l)),S.childrenByName(e,"TrackingEvents").forEach((function(e){S.childrenByName(e,"Tracking").forEach((function(e){var t=e.getAttribute("event"),n=S.parseNodeText(e);if(t&&n){if("progress"===t){if(!(i=e.getAttribute("offset")))return;t="%"===i.charAt(i.length-1)?"progress-".concat(i):"progress-".concat(Math.round(S.parseDuration(i)))}Array.isArray(r.trackingEvents[t])||(r.trackingEvents[t]=[]),r.trackingEvents[t].push(n)}}))})),S.childrenByName(e,"MediaFiles").forEach((function(e){S.childrenByName(e,"MediaFile").forEach((function(e){r.mediaFiles.push(function(e){var t={id:null,fileURL:null,fileSize:0,deliveryType:"progressive",mimeType:null,mediaType:null,codec:null,bitrate:0,minBitrate:0,maxBitrate:0,width:0,height:0,apiFramework:null,scalable:null,maintainAspectRatio:null};t.id=e.getAttribute("id"),t.fileURL=S.parseNodeText(e),t.deliveryType=e.getAttribute("delivery"),t.codec=e.getAttribute("codec"),t.mimeType=e.getAttribute("type"),t.mediaType=e.getAttribute("mediaType")||"2D",t.apiFramework=e.getAttribute("apiFramework"),t.fileSize=parseInt(e.getAttribute("fileSize")||0),t.bitrate=parseInt(e.getAttribute("bitrate")||0),t.minBitrate=parseInt(e.getAttribute("minBitrate")||0),t.maxBitrate=parseInt(e.getAttribute("maxBitrate")||0),t.width=parseInt(e.getAttribute("width")||0),t.height=parseInt(e.getAttribute("height")||0);var i=e.getAttribute("scalable");i&&"string"==typeof i&&(t.scalable=S.parseBoolean(i));var r=e.getAttribute("maintainAspectRatio");return r&&"string"==typeof r&&(t.maintainAspectRatio=S.parseBoolean(r)),t}(e))}));var t=S.childByName(e,"InteractiveCreativeFile");t&&(r.interactiveCreativeFile=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:e.type||null,apiFramework:e.apiFramework||null,variableDuration:S.parseBoolean(e.variableDuration),fileURL:null}}(S.parseAttributes(e));return t.fileURL=S.parseNodeText(e),t}(t));var i=S.childByName(e,"ClosedCaptionFiles");i&&S.childrenByName(i,"ClosedCaptionFile").forEach((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:e.type||null,language:e.language||null,fileURL:null}}(S.parseAttributes(e));t.fileURL=S.parseNodeText(e),r.closedCaptionFiles.push(t)}));var n,a,o,s=S.childByName(e,"Mezzanine"),l=(n=s,a={},o=!1,["delivery","type","width","height"].forEach((function(e){n&&n.getAttribute(e)?a[e]=n.getAttribute(e):o=!0})),o?null:a);if(l){var u={id:null,fileURL:null,delivery:null,codec:null,type:null,width:0,height:0,fileSize:0,mediaType:"2D"};u.id=s.getAttribute("id"),u.fileURL=S.parseNodeText(s),u.delivery=l.delivery,u.codec=s.getAttribute("codec"),u.type=l.type,u.width=parseInt(l.width,10),u.height=parseInt(l.height,10),u.fileSize=parseInt(s.getAttribute("fileSize"),10),u.mediaType=s.getAttribute("mediaType")||"2D",r.mezzanine=u}}));var u=S.childByName(e,"Icons");return u&&S.childrenByName(u,"Icon").forEach((function(e){r.icons.push(function(e){var t={program:null,height:0,width:0,xPosition:0,yPosition:0,apiFramework:null,offset:null,duration:0,type:null,staticResource:null,htmlResource:null,iframeResource:null,pxratio:"1",iconClickThroughURLTemplate:null,iconClickTrackingURLTemplates:[],iconViewTrackingURLTemplate:null};t.program=e.getAttribute("program"),t.height=parseInt(e.getAttribute("height")||0),t.width=parseInt(e.getAttribute("width")||0),t.xPosition=function(e){return-1!==["left","right"].indexOf(e)?e:parseInt(e||0)}(e.getAttribute("xPosition")),t.yPosition=function(e){return-1!==["top","bottom"].indexOf(e)?e:parseInt(e||0)}(e.getAttribute("yPosition")),t.apiFramework=e.getAttribute("apiFramework"),t.pxratio=e.getAttribute("pxratio")||"1",t.offset=S.parseDuration(e.getAttribute("offset")),t.duration=S.parseDuration(e.getAttribute("duration")),S.childrenByName(e,"HTMLResource").forEach((function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=S.parseNodeText(e)})),S.childrenByName(e,"IFrameResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=S.parseNodeText(e)})),S.childrenByName(e,"StaticResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=S.parseNodeText(e)}));var i=S.childByName(e,"IconClicks");return i&&(t.iconClickThroughURLTemplate=S.parseNodeText(S.childByName(i,"IconClickThrough")),S.childrenByName(i,"IconClickTracking").forEach((function(e){t.iconClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:S.parseNodeText(e)})}))),t.iconViewTrackingURLTemplate=S.parseNodeText(S.childByName(e,"IconViewTracking")),t}(e))})),r}function D(e,t){var i=function(){var e=v(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=e.id,i=e.adId,r=e.sequence,n=e.apiFramework;return{id:t,adId:i,sequence:r,apiFramework:n,type:"nonlinear",variations:[],trackingEvents:{}}}(t);return S.childrenByName(e,"TrackingEvents").forEach((function(e){var t,r;S.childrenByName(e,"Tracking").forEach((function(e){t=e.getAttribute("event"),r=S.parseNodeText(e),t&&r&&(Array.isArray(i.trackingEvents[t])||(i.trackingEvents[t]=[]),i.trackingEvents[t].push(r))}))})),S.childrenByName(e,"NonLinear").forEach((function(e){var t={id:null,width:0,height:0,expandedWidth:0,expandedHeight:0,scalable:!0,maintainAspectRatio:!0,minSuggestedDuration:0,apiFramework:"static",adType:"nonLinearAd",type:null,staticResource:null,htmlResource:null,iframeResource:null,nonlinearClickThroughURLTemplate:null,nonlinearClickTrackingURLTemplates:[],adParameters:null};t.id=e.getAttribute("id")||null,t.width=e.getAttribute("width"),t.height=e.getAttribute("height"),t.expandedWidth=e.getAttribute("expandedWidth"),t.expandedHeight=e.getAttribute("expandedHeight"),t.scalable=S.parseBoolean(e.getAttribute("scalable")),t.maintainAspectRatio=S.parseBoolean(e.getAttribute("maintainAspectRatio")),t.minSuggestedDuration=S.parseDuration(e.getAttribute("minSuggestedDuration")),t.apiFramework=e.getAttribute("apiFramework"),S.childrenByName(e,"HTMLResource").forEach((function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=S.parseNodeText(e)})),S.childrenByName(e,"IFrameResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=S.parseNodeText(e)})),S.childrenByName(e,"StaticResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=S.parseNodeText(e)}));var r=S.childByName(e,"AdParameters");r&&(t.adParameters=S.parseNodeText(r)),t.nonlinearClickThroughURLTemplate=S.parseNodeText(S.childByName(e,"NonLinearClickThrough")),S.childrenByName(e,"NonLinearClickTracking").forEach((function(e){t.nonlinearClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:S.parseNodeText(e)})})),i.variations.push(t)})),i}function x(e){var t=[];return e.forEach((function(e){var i=V(e);i&&t.push(i)})),t}function V(e){if("#comment"===e.nodeName)return null;var t,i={name:null,value:null,attributes:{},children:[]},r=e.attributes,n=e.childNodes;if(i.name=e.nodeName,e.attributes)for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];o.nodeName&&o.nodeValue&&(i.attributes[o.nodeName]=o.nodeValue)}for(var s in n)if(n.hasOwnProperty(s)){var l=V(n[s]);l&&i.children.push(l)}if(0===i.children.length||1===i.children.length&&["#cdata-section","#text"].indexOf(i.children[0].name)>=0){var u=S.parseNodeText(e);""!==u&&(i.value=u),i.children=[]}return null===(t=i).value&&0===Object.keys(t.attributes).length&&0===t.children.length?null:i}function U(e){var t=[];return e.forEach((function(e){var i,r,n={id:e.getAttribute("id")||null,adId:P(e),sequence:e.getAttribute("sequence")||null,apiFramework:e.getAttribute("apiFramework")||null},a=S.childByName(e,"UniversalAdId");a&&(i={idRegistry:a.getAttribute("idRegistry")||"unknown",value:S.parseNodeText(a)});var o=S.childByName(e,"CreativeExtensions");for(var s in o&&(r=x(S.childrenByName(o,"CreativeExtension"))),e.childNodes){var l=e.childNodes[s],u=void 0;switch(l.nodeName){case"Linear":u=L(l,n);break;case"NonLinearAds":u=D(l,n);break;case"CompanionAds":u=w(l,n)}u&&(i&&(u.universalAdId=i),r&&(u.creativeExtensions=r),t.push(u))}})),t}function P(e){return e.getAttribute("AdID")||e.getAttribute("adID")||e.getAttribute("adId")||null}var O={Wrapper:{subElements:["VASTAdTagURI","Impression"]},BlockedAdCategories:{attributes:["authority"]},InLine:{subElements:["AdSystem","AdTitle","Impression","AdServingId","Creatives"]},Category:{attributes:["authority"]},Pricing:{attributes:["model","currency"]},Verification:{oneOfinLineResources:["JavaScriptResource","ExecutableResource"],attributes:["vendor"]},UniversalAdId:{attributes:["idRegistry"]},JavaScriptResource:{attributes:["apiFramework","browserOptional"]},ExecutableResource:{attributes:["apiFramework","type"]},Tracking:{attributes:["event"]},Creatives:{subElements:["Creative"]},Creative:{subElements:["UniversalAdId"]},Linear:{subElements:["MediaFiles","Duration"]},MediaFiles:{subElements:["MediaFile"]},MediaFile:{attributes:["delivery","type","width","height"]},Mezzanine:{attributes:["delivery","type","width","height"]},NonLinear:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},Companion:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},StaticResource:{attributes:["creativeType"]},Icons:{subElements:["Icon"]},Icon:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"]}};function M(e,t){if(O[e.nodeName]&&O[e.nodeName].attributes){var i=O[e.nodeName].attributes.filter((function(t){return!e.getAttribute(t)}));i.length>0&&q({name:e.nodeName,parentName:e.parentNode.nodeName,attributes:i},t)}}function F(e,t,i){var r=O[e.nodeName],n=!i&&"Wrapper"!==e.nodeName;if(r&&!n){if(r.subElements){var a=r.subElements.filter((function(t){return!S.childByName(e,t)}));a.length>0&&q({name:e.nodeName,parentName:e.parentNode.nodeName,subElements:a},t)}i&&r.oneOfinLineResources&&(r.oneOfinLineResources.some((function(t){return S.childByName(e,t)}))||q({name:e.nodeName,parentName:e.parentNode.nodeName,oneOfResources:r.oneOfinLineResources},t))}}function B(e){return e.children&&0!==e.children.length}function q(e,t){var i=e.name,r=e.parentName,n=e.attributes,a=e.subElements,o=e.oneOfResources,s="Element '".concat(i,"'");t("VAST-warning",{message:s+=n?" missing required attribute(s) '".concat(n.join(", "),"' "):a?" missing required sub element(s) '".concat(a.join(", "),"' "):o?" must provide one of the following '".concat(o.join(", "),"' "):" is empty",parentElement:r,specVersion:4.1})}var H=function e(t,i,r){if(t&&t.nodeName)if("InLine"===t.nodeName&&(r=!0),M(t,i),B(t)){F(t,i,r);for(var n=0;n<t.children.length;n++)e(t.children[n],i,r)}else 0===S.parseNodeText(t).length&&q({name:t.nodeName,parentName:t.parentNode.nodeName},i)};function W(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.allowMultipleAds,n=i.followAdditionalWrappers,a=e.childNodes;for(var o in a){var s=a[o];if(-1!==["Wrapper","InLine"].indexOf(s.nodeName)&&("Wrapper"!==s.nodeName||!1!==n)){if(S.copyNodeAttribute("id",e,s),S.copyNodeAttribute("sequence",e,s),S.copyNodeAttribute("adType",e,s),"Wrapper"===s.nodeName)return{ad:X(s,t),type:"WRAPPER"};if("InLine"===s.nodeName)return{ad:j(s,t,{allowMultipleAds:r}),type:"INLINE"}}}}function j(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.allowMultipleAds;return!1===r&&e.getAttribute("sequence")?null:z(e,t)}function z(e,t){var i=[];t&&H(e,t);var r=e.childNodes,n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,sequence:e.sequence||null,adType:e.adType||null,adServingId:null,categories:[],expires:null,viewableImpression:{},system:null,title:null,description:null,advertiser:null,pricing:null,survey:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:[],extensions:[],adVerifications:[],blockedAdCategories:[],followAdditionalWrappers:!0,allowMultipleAds:!1,fallbackOnNoAd:null}}(S.parseAttributes(e));for(var a in r){var o=r[a];switch(o.nodeName){case"Error":n.errorURLTemplates.push(S.parseNodeText(o));break;case"Impression":n.impressionURLTemplates.push({id:o.getAttribute("id")||null,url:S.parseNodeText(o)});break;case"Creatives":n.creatives=U(S.childrenByName(o,"Creative"));break;case"Extensions":var s=S.childrenByName(o,"Extension");n.extensions=x(s),n.adVerifications.length||(i=G(s));break;case"AdVerifications":n.adVerifications=Q(S.childrenByName(o,"Verification"));break;case"AdSystem":n.system={value:S.parseNodeText(o),version:o.getAttribute("version")||null};break;case"AdTitle":n.title=S.parseNodeText(o);break;case"AdServingId":n.adServingId=S.parseNodeText(o);break;case"Category":n.categories.push({authority:o.getAttribute("authority")||null,value:S.parseNodeText(o)});break;case"Expires":n.expires=parseInt(S.parseNodeText(o),10);break;case"ViewableImpression":n.viewableImpression=Y(o);break;case"Description":n.description=S.parseNodeText(o);break;case"Advertiser":n.advertiser={id:o.getAttribute("id")||null,value:S.parseNodeText(o)};break;case"Pricing":n.pricing={value:S.parseNodeText(o),model:o.getAttribute("model")||null,currency:o.getAttribute("currency")||null};break;case"Survey":n.survey=S.parseNodeText(o);break;case"BlockedAdCategories":n.blockedAdCategories.push({authority:o.getAttribute("authority")||null,value:S.parseNodeText(o)})}}return i.length&&(n.adVerifications=n.adVerifications.concat(i)),n}function X(e,t){var i=z(e,t),r=e.getAttribute("followAdditionalWrappers"),n=e.getAttribute("allowMultipleAds"),a=e.getAttribute("fallbackOnNoAd");i.followAdditionalWrappers=!r||S.parseBoolean(r),i.allowMultipleAds=!!n&&S.parseBoolean(n),i.fallbackOnNoAd=a?S.parseBoolean(a):null;var o=S.childByName(e,"VASTAdTagURI");if(o?i.nextWrapperURL=S.parseNodeText(o):(o=S.childByName(e,"VASTAdTagURL"))&&(i.nextWrapperURL=S.parseNodeText(S.childByName(o,"URL"))),i.creatives.forEach((function(e){if(-1!==["linear","nonlinear"].indexOf(e.type)){if(e.trackingEvents){i.trackingEvents||(i.trackingEvents={}),i.trackingEvents[e.type]||(i.trackingEvents[e.type]={});var t=function(t){var r=e.trackingEvents[t];Array.isArray(i.trackingEvents[e.type][t])||(i.trackingEvents[e.type][t]=[]),r.forEach((function(r){i.trackingEvents[e.type][t].push(r)}))};for(var r in e.trackingEvents)t(r)}e.videoClickTrackingURLTemplates&&(Array.isArray(i.videoClickTrackingURLTemplates)||(i.videoClickTrackingURLTemplates=[]),e.videoClickTrackingURLTemplates.forEach((function(e){i.videoClickTrackingURLTemplates.push(e)}))),e.videoClickThroughURLTemplate&&(i.videoClickThroughURLTemplate=e.videoClickThroughURLTemplate),e.videoCustomClickURLTemplates&&(Array.isArray(i.videoCustomClickURLTemplates)||(i.videoCustomClickURLTemplates=[]),e.videoCustomClickURLTemplates.forEach((function(e){i.videoCustomClickURLTemplates.push(e)})))}})),i.nextWrapperURL)return i}function Q(e){var t=[];return e.forEach((function(e){var i={resource:null,vendor:null,browserOptional:!1,apiFramework:null,type:null,parameters:null,trackingEvents:{}},r=e.childNodes;for(var n in S.assignAttributes(e.attributes,i),r){var a=r[n];switch(a.nodeName){case"JavaScriptResource":case"ExecutableResource":i.resource=S.parseNodeText(a),S.assignAttributes(a.attributes,i);break;case"VerificationParameters":i.parameters=S.parseNodeText(a)}}var o=S.childByName(e,"TrackingEvents");o&&S.childrenByName(o,"Tracking").forEach((function(e){var t=e.getAttribute("event"),r=S.parseNodeText(e);t&&r&&(Array.isArray(i.trackingEvents[t])||(i.trackingEvents[t]=[]),i.trackingEvents[t].push(r))})),t.push(i)})),t}function G(e){var t=null,i=[];return e.some((function(e){return t=S.childByName(e,"AdVerifications")})),t&&(i=Q(S.childrenByName(t,"Verification"))),i}function Y(e){var t={};t.id=e.getAttribute("id")||null;var i=e.childNodes;for(var r in i){var n=i[r],a=n.nodeName,o=S.parseNodeText(n);if(("Viewable"===a||"NotViewable"===a||"ViewUndetermined"===a)&&o){var s=a.toLowerCase();Array.isArray(t[s])||(t[s]=[]),t[s].push(o)}}return t}var $=function(){function e(){n(this,e),this._handlers=[]}return o(e,[{key:"on",value:function(e,t){if("function"!=typeof t)throw new TypeError("The handler argument must be of type Function. Received type ".concat(r(t)));if(!e)throw new TypeError("The event argument must be of type String. Received type ".concat(r(e)));return this._handlers.push({event:e,handler:t}),this}},{key:"once",value:function(e,t){return this.on(e,function(e,t,i){var r={fired:!1,wrapFn:void 0};function n(){r.fired||(e.off(t,r.wrapFn),r.fired=!0,i.bind(e).apply(void 0,arguments))}return r.wrapFn=n,n}(this,e,t))}},{key:"off",value:function(e,t){return this._handlers=this._handlers.filter((function(i){return i.event!==e||i.handler!==t})),this}},{key:"emit",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];var n=!1;return this._handlers.forEach((function(t){"*"===t.event&&(n=!0,t.handler.apply(t,[e].concat(i))),t.event===e&&(n=!0,t.handler.apply(t,i))})),n}},{key:"removeAllListeners",value:function(e){return e?(this._handlers=this._handlers.filter((function(t){return t.event!==e})),this):(this._handlers=[],this)}},{key:"listenerCount",value:function(e){return this._handlers.filter((function(t){return t.event===e})).length}},{key:"listeners",value:function(e){return this._handlers.reduce((function(t,i){return i.event===e&&t.push(i.handler),t}),[])}},{key:"eventNames",value:function(){return this._handlers.map((function(e){return e.event}))}}]),e}(),K=i(310),Z=i(147),J=i(685),ee=i(687),te=i(647).a,ie=function(e,t,i){var r="https:"===(e=K.parse(e)).protocol?ee:J;if("file:"===e.protocol)Z.readFile(K.fileURLToPath(e.href),"utf8",(function(e,t){if(e)return i(e);var r=(new te).parseFromString(t);i(null,r,{byteLength:Buffer.from(t).byteLength})}));else{var n,a="",o=t.timeout||12e4,s=r.get(e.href,(function(e){e.on("data",(function(e){a+=e,clearTimeout(n),n=l()})),e.on("end",(function(){clearTimeout(n);var t=(new te).parseFromString(a);i(null,t,{byteLength:Buffer.from(a).byteLength,statusCode:e.statusCode})}))}));s.on("error",(function(e){clearTimeout(n),s.aborted?i(new Error("NodeURLHandler: Request timed out after ".concat(o," ms.")),null,{statusCode:408}):i(e)}));var l=function(){return setTimeout((function(){return s.abort()}),o)};n=l()}};function re(){try{var e=new window.XMLHttpRequest;return"withCredentials"in e?e:null}catch(e){return null}}function ne(e,t,i){var r=i?408:e.status,n=i?"XHRURLHandler: Request timed out after ".concat(e.timeout," ms (").concat(r,")"):"XHRURLHandler: ".concat(e.statusText," (").concat(r,")");t(new Error(n),null,{statusCode:r})}var ae=function(e,t,i){if("https:"===window.location.protocol&&0===e.indexOf("http://"))return i(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{var r=re();r.open("GET",e),r.timeout=t.timeout||12e4,r.withCredentials=t.withCredentials||!1,r.overrideMimeType&&r.overrideMimeType("text/xml"),r.onload=function(){return function(e,t){200===e.status?t(null,e.responseXML,{byteLength:e.response.length,statusCode:e.status}):ne(e,t,!1)}(r,i)},r.onerror=function(){return ne(r,i,!1)},r.onabort=function(){return ne(r,i,!1)},r.ontimeout=function(){return ne(r,i,!0)},r.send()}catch(e){i(new Error("XHRURLHandler: Unexpected error"))}},oe=function(){return!!re()},se={get:function(e,t,i){return i||("function"==typeof t&&(i=t),t={}),"undefined"==typeof window||null===window?ie(e,t,i):oe()?ae(e,t,i):i(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler"))}},le=0,ue=0,ce=function(e,t){!e||!t||e<=0||t<=0||(ue=(ue*le+8*e/t)/++le)},de={ERRORCODE:900,extensions:[]},he=function(e){c(i,$);var t=m(i);function i(){var e;return n(this,i),(e=t.call(this)).remainingAds=[],e.parentURLs=[],e.errorURLTemplates=[],e.rootErrorURLTemplates=[],e.maxWrapperDepth=null,e.URLTemplateFilters=[],e.fetchingOptions={},e.parsingOptions={},e}return o(i,[{key:"addURLTemplateFilter",value:function(e){"function"==typeof e&&this.URLTemplateFilters.push(e)}},{key:"removeURLTemplateFilter",value:function(){this.URLTemplateFilters.pop()}},{key:"countURLTemplateFilters",value:function(){return this.URLTemplateFilters.length}},{key:"clearURLTemplateFilters",value:function(){this.URLTemplateFilters=[]}},{key:"trackVastError",value:function(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n];this.emit("VAST-error",Object.assign.apply(Object,[{},de,t].concat(r))),_.track(e,t)}},{key:"getErrorURLTemplates",value:function(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)}},{key:"getEstimatedBitrate",value:function(){return ue}},{key:"fetchVAST",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(n,a){t.URLTemplateFilters.forEach((function(t){e=t(e)})),t.parentURLs.push(e);var o=Date.now();t.emit("VAST-resolving",{url:e,previousUrl:r,wrapperDepth:i,maxWrapperDepth:t.maxWrapperDepth,timeout:t.fetchingOptions.timeout}),t.urlHandler.get(e,t.fetchingOptions,(function(s,l){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=Math.round(Date.now()-o),d=Object.assign({url:e,previousUrl:r,wrapperDepth:i,error:s,duration:c},u);t.emit("VAST-resolved",d),ce(u.byteLength,c),s?a(s):n(l)}))}))}},{key:"initParsingStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.errorURLTemplates=[],this.fetchingOptions={timeout:e.timeout||12e4,withCredentials:e.withCredentials},this.maxWrapperDepth=e.wrapperLimit||10,this.parentURLs=[],this.parsingOptions={allowMultipleAds:e.allowMultipleAds},this.remainingAds=[],this.rootErrorURLTemplates=[],this.rootURL="",this.urlHandler=e.urlHandler||e.urlhandler||se,this.vastVersion=null,ce(e.byteLength,e.requestDuration)}},{key:"getRemainingAds",value:function(e){var t=this;if(0===this.remainingAds.length)return Promise.reject(new Error("No more ads are available for the given VAST"));var i=e?_.flatten(this.remainingAds):this.remainingAds.shift();return this.errorURLTemplates=[],this.parentURLs=[],this.resolveAds(i,{wrapperDepth:0,url:this.rootURL}).then((function(e){return t.buildVASTResponse(e)}))}},{key:"getAndParseVAST",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(i),this.URLTemplateFilters.forEach((function(t){e=t(e)})),this.rootURL=e,this.fetchVAST(e).then((function(r){return i.previousUrl=e,i.isRootVAST=!0,i.url=e,t.parse(r,i).then((function(e){return t.buildVASTResponse(e)}))}))}},{key:"parseVAST",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(i),i.isRootVAST=!0,this.parse(e,i).then((function(e){return t.buildVASTResponse(e)}))}},{key:"buildVASTResponse",value:function(e){var t,i={ads:(t={ads:e,errorURLTemplates:this.getErrorURLTemplates(),version:this.vastVersion}).ads||[],errorURLTemplates:t.errorURLTemplates||[],version:t.version||null};return this.completeWrapperResolving(i),i}},{key:"parseVastXml",value:function(e,t){var i=t.isRootVAST,r=void 0!==i&&i,n=t.url,a=void 0===n?null:n,o=t.wrapperDepth,s=void 0===o?0:o,l=t.allowMultipleAds,u=t.followAdditionalWrappers;if(!e||!e.documentElement||"VAST"!==e.documentElement.nodeName)throw this.emit("VAST-ad-parsed",{type:"ERROR",url:a,wrapperDepth:s}),new Error("Invalid VAST XMLDocument");var c=[],d=e.documentElement.childNodes,h=e.documentElement.getAttribute("version");for(var p in r&&h&&(this.vastVersion=h),d){var m=d[p];if("Error"===m.nodeName){var v=S.parseNodeText(m);r?this.rootErrorURLTemplates.push(v):this.errorURLTemplates.push(v)}else if("Ad"===m.nodeName){if(this.vastVersion&&parseFloat(this.vastVersion)<3)l=!0;else if(!1===l&&c.length>1)break;var f=W(m,this.emit.bind(this),{allowMultipleAds:l,followAdditionalWrappers:u});f.ad?(c.push(f.ad),this.emit("VAST-ad-parsed",{type:f.type,url:a,wrapperDepth:s,adIndex:c.length-1,vastVersion:h})):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}return c}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.url,r=void 0===i?null:i,n=t.resolveAll,a=void 0===n||n,o=t.wrapperSequence,s=void 0===o?null:o,l=t.previousUrl,u=void 0===l?null:l,c=t.wrapperDepth,d=void 0===c?0:c,h=t.isRootVAST,p=void 0!==h&&h,m=t.followAdditionalWrappers,v=t.allowMultipleAds,f=[];this.vastVersion&&parseFloat(this.vastVersion)<3&&p&&(v=!0);try{f=this.parseVastXml(e,{isRootVAST:p,url:r,wrapperDepth:d,allowMultipleAds:v,followAdditionalWrappers:m})}catch(e){return Promise.reject(e)}return 1===f.length&&null!=s&&(f[0].sequence=s),!1===a&&(this.remainingAds=S.splitVAST(f),f=this.remainingAds.shift()),this.resolveAds(f,{wrapperDepth:d,previousUrl:u,url:r})}},{key:"resolveAds",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0,r=i.wrapperDepth,n=i.previousUrl,a=i.url,o=[];return n=a,t.forEach((function(t){var i=e.resolveWrappers(t,r,n);o.push(i)})),Promise.all(o).then((function(t){var i=_.flatten(t);if(!i&&e.remainingAds.length>0){var o=e.remainingAds.shift();return e.resolveAds(o,{wrapperDepth:r,previousUrl:n,url:a})}return i}))}},{key:"resolveWrappers",value:function(e,t,i){var r=this;return new Promise((function(n){var a;if(t++,!e.nextWrapperURL)return delete e.nextWrapperURL,n(e);if(t>=r.maxWrapperDepth||-1!==r.parentURLs.indexOf(e.nextWrapperURL))return e.errorCode=302,delete e.nextWrapperURL,n(e);e.nextWrapperURL=S.resolveVastAdTagURI(e.nextWrapperURL,i),r.URLTemplateFilters.forEach((function(t){e.nextWrapperURL=t(e.nextWrapperURL)}));var o=null!==(a=r.parsingOptions.allowMultipleAds)&&void 0!==a?a:e.allowMultipleAds,s=e.sequence;r.fetchVAST(e.nextWrapperURL,t,i).then((function(a){return r.parse(a,{url:e.nextWrapperURL,previousUrl:i,wrapperSequence:s,wrapperDepth:t,followAdditionalWrappers:e.followAdditionalWrappers,allowMultipleAds:o}).then((function(t){if(delete e.nextWrapperURL,0===t.length)return e.creatives=[],n(e);t.forEach((function(t){t&&S.mergeWrapperAdData(t,e)})),n(t)}))})).catch((function(t){e.errorCode=301,e.errorMessage=t.message,n(e)}))}))}},{key:"completeWrapperResolving",value:function(e){if(0===e.ads.length)this.trackVastError(e.errorURLTemplates,{ERRORCODE:303});else for(var t=e.ads.length-1;t>=0;t--){var i=e.ads[t];(i.errorCode||0===i.creatives.length)&&(this.trackVastError(i.errorURLTemplates.concat(e.errorURLTemplates),{ERRORCODE:i.errorCode||303},{ERRORMESSAGE:i.errorMessage||""},{extensions:i.extensions},{system:i.system}),e.ads.splice(t,1))}}}]),i}(),pe=null,me={data:{},length:0,getItem:function(e){return this.data[e]},setItem:function(e,t){this.data[e]=t,this.length=Object.keys(this.data).length},removeItem:function(e){delete this.data[e],this.length=Object.keys(this.data).length},clear:function(){this.data={},this.length=0}},ve=function(){function e(){n(this,e),this.storage=this.initStorage()}return o(e,[{key:"initStorage",value:function(){if(pe)return pe;try{pe="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e){pe=null}return pe&&!this.isStorageDisabled(pe)||(pe=me).clear(),pe}},{key:"isStorageDisabled",value:function(e){var t="__VASTStorage__";try{if(e.setItem(t,t),e.getItem(t)!==t)return e.removeItem(t),!0}catch(e){return!0}return e.removeItem(t),!1}},{key:"getItem",value:function(e){return this.storage.getItem(e)}},{key:"setItem",value:function(e,t){return this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){return this.storage.removeItem(e)}},{key:"clear",value:function(){return this.storage.clear()}}]),e}(),fe=function(){function e(t,i,r){n(this,e),this.cappingFreeLunch=t||0,this.cappingMinimumTimeInterval=i||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new he,this.storage=r||new ve,void 0===this.lastSuccessfulAd&&(this.lastSuccessfulAd=0),void 0===this.totalCalls&&(this.totalCalls=0),void 0===this.totalCallsTimeout&&(this.totalCallsTimeout=0)}return o(e,[{key:"getParser",value:function(){return this.vastParser}},{key:"hasRemainingAds",value:function(){return this.vastParser.remainingAds.length>0}},{key:"getNextAds",value:function(e){return this.vastParser.getRemainingAds(e)}},{key:"get",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Date.now();return(i=Object.assign({},this.defaultOptions,i)).hasOwnProperty("resolveAll")||(i.resolveAll=!1),this.totalCallsTimeout<r?(this.totalCalls=1,this.totalCallsTimeout=r+36e5):this.totalCalls++,new Promise((function(n,a){if(t.cappingFreeLunch>=t.totalCalls)return a(new Error("VAST call canceled – FreeLunch capping not reached yet ".concat(t.totalCalls,"/").concat(t.cappingFreeLunch)));var o=r-t.lastSuccessfulAd;if(o<0)t.lastSuccessfulAd=0;else if(o<t.cappingMinimumTimeInterval)return a(new Error("VAST call canceled – (".concat(t.cappingMinimumTimeInterval,")ms minimum interval reached")));t.vastParser.getAndParseVAST(e,i).then((function(e){return n(e)})).catch((function(e){return a(e)}))}))}},{key:"lastSuccessfulAd",get:function(){return this.storage.getItem("vast-client-last-successful-ad")},set:function(e){this.storage.setItem("vast-client-last-successful-ad",e)}},{key:"totalCalls",get:function(){return this.storage.getItem("vast-client-total-calls")},set:function(e){this.storage.setItem("vast-client-total-calls",e)}},{key:"totalCallsTimeout",get:function(){return this.storage.getItem("vast-client-total-calls-timeout")},set:function(e){this.storage.setItem("vast-client-total-calls-timeout",e)}}]),e}(),ge=function(e){c(i,$);var t=m(i);function i(e,r,a){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;for(var l in n(this,i),(o=t.call(this)).ad=r,o.creative=a,o.variation=s,o.muted=!1,o.impressed=!1,o.skippable=!1,o.trackingEvents={},o.lastPercentage=0,o._alreadyTriggeredQuartiles={},o.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],o.creative.trackingEvents){var u=o.creative.trackingEvents[l];o.trackingEvents[l]=u.slice(0)}return I(o.creative)?o._initLinearTracking():o._initVariationTracking(),e&&o.on("start",(function(){e.lastSuccessfulAd=Date.now()})),o}return o(i,[{key:"_initLinearTracking",value:function(){this.linear=!0,this.skipDelay=this.creative.skipDelay,this.setDuration(this.creative.duration),this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates}},{key:"_initVariationTracking",value:function(){if(this.linear=!1,this.skipDelay=-1,this.variation){for(var e in this.variation.trackingEvents){var t=this.variation.trackingEvents[e];this.trackingEvents[e]?this.trackingEvents[e]=this.trackingEvents[e].concat(t.slice(0)):this.trackingEvents[e]=t.slice(0)}"nonLinearAd"===this.variation.adType?(this.clickThroughURLTemplate=this.variation.nonlinearClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.nonlinearClickTrackingURLTemplates,this.setDuration(this.variation.minSuggestedDuration)):function(e){return"companionAd"===e.adType}(this.variation)&&(this.clickThroughURLTemplate=this.variation.companionClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.companionClickTrackingURLTemplates)}}},{key:"setDuration",value:function(e){this.assetDuration=e,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100}}},{key:"setProgress",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.skipDelay||-1;if(-1===r||this.skippable||(r>e?this.emit("skip-countdown",r-e):(this.skippable=!0,this.emit("skip-countdown",0))),this.assetDuration>0){var n=Math.round(e/this.assetDuration*100),a=[];if(e>0){a.push("start");for(var o=this.lastPercentage;o<n;o++)a.push("progress-".concat(o+1,"%"));for(var s in a.push("progress-".concat(Math.round(e))),this.quartiles)this.isQuartileReached(s,this.quartiles[s],e)&&(a.push(s),this._alreadyTriggeredQuartiles[s]=!0);this.lastPercentage=n}a.forEach((function(e){t.track(e,{macros:i,once:!0})})),e<this.progress&&this.track("rewind",{macros:i})}this.progress=e}},{key:"isQuartileReached",value:function(e,t,i){var r=!1;return t<=i&&!this._alreadyTriggeredQuartiles[e]&&(r=!0),r}},{key:"setMuted",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.muted!==e&&this.track(e?"mute":"unmute",{macros:t}),this.muted=e}},{key:"setPaused",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.paused!==e&&this.track(e?"pause":"resume",{macros:t}),this.paused=e}},{key:"setFullscreen",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fullscreen!==e&&this.track(e?"fullscreen":"exitFullscreen",{macros:t}),this.fullscreen=e}},{key:"setExpand",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.expanded!==e&&(this.track(e?"expand":"collapse",{macros:t}),this.track(e?"playerExpand":"playerCollapse",{macros:t})),this.expanded=e}},{key:"setSkipDelay",value:function(e){"number"==typeof e&&(this.skipDelay=e)}},{key:"trackImpression",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.impressed||(this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates,e),this.track("creativeView",{macros:e}))}},{key:"error",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.trackURLs(this.ad.errorURLTemplates,e,{isCustomCode:t})}},{key:"errorWithCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.error({ERRORCODE:e},t)}},{key:"complete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("complete",{macros:e})}},{key:"notUsed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("notUsed",{macros:e}),this.trackingEvents=[]}},{key:"otherAdInteraction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("otherAdInteraction",{macros:e})}},{key:"acceptInvitation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("acceptInvitation",{macros:e})}},{key:"adExpand",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("adExpand",{macros:e})}},{key:"adCollapse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("adCollapse",{macros:e})}},{key:"minimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("minimize",{macros:e})}},{key:"verificationNotExecuted",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.ad||!this.ad.adVerifications||!this.ad.adVerifications.length)throw new Error("No adVerifications provided");if(!e)throw new Error("No vendor provided, unable to find associated verificationNotExecuted");var i=this.ad.adVerifications.find((function(t){return t.vendor===e}));if(!i)throw new Error("No associated verification element found for vendor: ".concat(e));var r=i.trackingEvents;if(r&&r.verificationNotExecuted){var n=r.verificationNotExecuted;this.trackURLs(n,t),this.emit("verificationNotExecuted",{trackingURLTemplates:n})}}},{key:"overlayViewDuration",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.ADPLAYHEAD=e,this.track("overlayViewDuration",{macros:t})}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track(this.linear?"closeLinear":"close",{macros:e})}},{key:"skip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("skip",{macros:e})}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("loaded",{macros:e})}},{key:"click",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.clickTrackingURLTemplates&&this.clickTrackingURLTemplates.length&&this.trackURLs(this.clickTrackingURLTemplates,t);var i=this.clickThroughURLTemplate||e,r=u({},t);if(i){this.progress&&(r.ADPLAYHEAD=this.progressFormatted());var n=_.resolveURLTemplates([i],r)[0];this.emit("clickthrough",n)}}},{key:"track",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.macros,r=void 0===i?{}:i,n=t.once,a=void 0!==n&&n;"closeLinear"===e&&!this.trackingEvents[e]&&this.trackingEvents.close&&(e="close");var o=this.trackingEvents[e],s=this.emitAlwaysEvents.indexOf(e)>-1;o?(this.emit(e,{trackingURLTemplates:o}),this.trackURLs(o,r)):s&&this.emit(e,null),a&&(delete this.trackingEvents[e],s&&this.emitAlwaysEvents.splice(this.emitAlwaysEvents.indexOf(e),1))}},{key:"trackURLs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=u({},t);this.linear&&(this.creative&&this.creative.mediaFiles&&this.creative.mediaFiles[0]&&this.creative.mediaFiles[0].fileURL&&(r.ASSETURI=this.creative.mediaFiles[0].fileURL),this.progress&&(r.ADPLAYHEAD=this.progressFormatted())),this.creative&&this.creative.universalAdId&&this.creative.universalAdId.idRegistry&&this.creative.universalAdId.value&&(r.UNIVERSALADID="".concat(this.creative.universalAdId.idRegistry," ").concat(this.creative.universalAdId.value)),this.ad&&(this.ad.sequence&&(r.PODSEQUENCE=this.ad.sequence),this.ad.adType&&(r.ADTYPE=this.ad.adType),this.ad.adServingId&&(r.ADSERVINGID=this.ad.adServingId),this.ad.categories&&this.ad.categories.length&&(r.ADCATEGORIES=this.ad.categories.map((function(e){return e.value})).join(",")),this.ad.blockedAdCategories&&this.ad.blockedAdCategories.length&&(r.BLOCKEDADCATEGORIES=this.ad.blockedAdCategories)),_.track(e,r,i)}},{key:"convertToTimecode",value:function(e){var t=1e3*e,i=Math.floor(t/36e5),r=Math.floor(t/6e4%60),n=Math.floor(t/1e3%60),a=Math.floor(t%1e3);return"".concat(_.leftpad(i,2),":").concat(_.leftpad(r,2),":").concat(_.leftpad(n,2),".").concat(_.leftpad(a,3))}},{key:"progressFormatted",value:function(){return this.convertToTimecode(this.progress)}}]),i}();t.WN=fe,t.OF=he,t.BD=ge},125:(e,t)=>{"use strict";function i(e,t){return void 0===t&&(t=Object),t&&"function"==typeof t.freeze?t.freeze(e):e}var r=i({HTML:"text/html",isHTML:function(e){return e===r.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),n=i({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===n.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});t.freeze=i,t.MIME_TYPE=r,t.NAMESPACE=n},647:(e,t,i)=>{var r=i(125),n=i(791),a=r.NAMESPACE;function o(e){this.options=e||{locator:{}}}function s(){this.cdata=!1}function l(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function u(e,t,i){return"string"==typeof e?e.substr(t,i):e.length>=t+i||t?new java.lang.String(e,t,i)+"":e}function c(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}o.prototype.parseFromString=function(e,t){var i=this.options,r=new h,o=i.domBuilder||new s,l=i.errorHandler,u=i.locator,c=i.xmlns||{},d=/\/x?html?$/.test(t),p=d?n.HTML_ENTITIES:n.XML_ENTITIES;return u&&o.setDocumentLocator(u),r.errorHandler=function(e,t,i){if(!e){if(t instanceof s)return t;e=t}var r={},n=e instanceof Function;function a(t){var a=e[t];!a&&n&&(a=2==e.length?function(i){e(t,i)}:e),r[t]=a&&function(e){a("[xmldom "+t+"]\t"+e+function(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}(i))}||function(){}}return i=i||{},a("warning"),a("error"),a("fatalError"),r}(l,o,u),r.domBuilder=i.domBuilder||o,d&&(c[""]=a.HTML),c.xml=c.xml||a.XML,e&&"string"==typeof e?r.parse(e,c,p):r.errorHandler.error("invalid doc source"),o.doc},s.prototype={startDocument:function(){this.doc=(new m).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,i,r){var n=this.doc,a=n.createElementNS(e,i||t),o=r.length;c(this,a),this.currentElement=a,this.locator&&l(this.locator,a);for(var s=0;s<o;s++){e=r.getURI(s);var u=r.getValue(s),d=(i=r.getQName(s),n.createAttributeNS(e,i));this.locator&&l(r.getLocator(s),d),d.value=d.nodeValue=u,a.setAttributeNode(d)}},endElement:function(e,t,i){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var i=this.doc.createProcessingInstruction(e,t);this.locator&&l(this.locator,i),c(this,i)},ignorableWhitespace:function(e,t,i){},characters:function(e,t,i){if(e=u.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(e);else r=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&l(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,i){e=u.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&l(this.locator,r),c(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,i){var r=this.doc.implementation;if(r&&r.createDocumentType){var n=r.createDocumentType(e,t,i);this.locator&&l(this.locator,n),c(this,n)}},warning:function(e){},error:function(e){},fatalError:function(e){throw new p(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){s.prototype[e]=function(){return null}}));var d=i(275),h=d.XMLReader,p=d.ParseError,m=i(34).DOMImplementation;i(34),t.a=o},34:(e,t,i)=>{var r=i(125).NAMESPACE;function n(e){return""!==e}function a(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function o(e){if(!e)return[];var t=function(e){return e?e.split(/[\t\n\f\r ]+/).filter(n):[]}(e);return Object.keys(t.reduce(a,{}))}function s(e,t){for(var i in e)t[i]=e[i]}function l(e,t){var i=e.prototype;if(!(i instanceof t)){function r(){}r.prototype=t.prototype,s(i,r=new r),e.prototype=i=r}i.constructor!=e&&(i.constructor=e)}var u={},c=u.ELEMENT_NODE=1,d=u.ATTRIBUTE_NODE=2,h=u.TEXT_NODE=3,p=u.CDATA_SECTION_NODE=4,m=u.ENTITY_REFERENCE_NODE=5,v=u.ENTITY_NODE=6,f=u.PROCESSING_INSTRUCTION_NODE=7,g=u.COMMENT_NODE=8,A=u.DOCUMENT_NODE=9,T=u.DOCUMENT_TYPE_NODE=10,y=u.DOCUMENT_FRAGMENT_NODE=11,E=u.NOTATION_NODE=12,b={},N={},k=(b.INDEX_SIZE_ERR=(N[1]="Index size error",1),b.DOMSTRING_SIZE_ERR=(N[2]="DOMString size error",2),b.HIERARCHY_REQUEST_ERR=(N[3]="Hierarchy request error",3)),C=(b.WRONG_DOCUMENT_ERR=(N[4]="Wrong document",4),b.INVALID_CHARACTER_ERR=(N[5]="Invalid character",5),b.NO_DATA_ALLOWED_ERR=(N[6]="No data allowed",6),b.NO_MODIFICATION_ALLOWED_ERR=(N[7]="No modification allowed",7),b.NOT_FOUND_ERR=(N[8]="Not found",8)),_=(b.NOT_SUPPORTED_ERR=(N[9]="Not supported",9),b.INUSE_ATTRIBUTE_ERR=(N[10]="Attribute in use",10));b.INVALID_STATE_ERR=(N[11]="Invalid state",11),b.SYNTAX_ERR=(N[12]="Syntax error",12),b.INVALID_MODIFICATION_ERR=(N[13]="Invalid modification",13),b.NAMESPACE_ERR=(N[14]="Invalid namespace",14),b.INVALID_ACCESS_ERR=(N[15]="Invalid access",15);function R(e,t){if(t instanceof Error)var i=t;else i=this,Error.call(this,N[e]),this.message=N[e],Error.captureStackTrace&&Error.captureStackTrace(this,R);return i.code=e,t&&(this.message=this.message+": "+t),i}function S(){}function w(e,t){this._node=e,this._refresh=t,I(this)}function I(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var i=e._refresh(e._node);ue(e,"length",i.length),s(i,e),e._inc=t}}function L(){}function D(e,t){for(var i=e.length;i--;)if(e[i]===t)return i}function x(e,t,i,n){if(n?t[D(t,n)]=i:t[t.length++]=i,e){i.ownerElement=e;var a=e.ownerDocument;a&&(n&&B(a,e,n),function(e,t,i){e&&e._inc++,i.namespaceURI===r.XMLNS&&(t._nsMap[i.prefix?i.localName:""]=i.value)}(a,e,i))}}function V(e,t,i){var r=D(t,i);if(!(r>=0))throw R(C,new Error(e.tagName+"@"+i));for(var n=t.length-1;r<n;)t[r]=t[++r];if(t.length=n,e){var a=e.ownerDocument;a&&(B(a,e,i),i.ownerElement=null)}}function U(){}function P(){}function O(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function M(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(M(e,t))return!0}while(e=e.nextSibling)}function F(){}function B(e,t,i,n){e&&e._inc++,i.namespaceURI===r.XMLNS&&delete t._nsMap[i.prefix?i.localName:""]}function q(e,t,i){if(e&&e._inc){e._inc++;var r=t.childNodes;if(i)r[r.length++]=i;else{for(var n=t.firstChild,a=0;n;)r[a++]=n,n=n.nextSibling;r.length=a}}}function H(e,t){var i=t.previousSibling,r=t.nextSibling;return i?i.nextSibling=r:e.firstChild=r,r?r.previousSibling=i:e.lastChild=i,q(e.ownerDocument,e),t}function W(e,t,i){var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===y){var n=t.firstChild;if(null==n)return t;var a=t.lastChild}else n=a=t;var o=i?i.previousSibling:e.lastChild;n.previousSibling=o,a.nextSibling=i,o?o.nextSibling=n:e.firstChild=n,null==i?e.lastChild=a:i.previousSibling=a;do{n.parentNode=e}while(n!==a&&(n=n.nextSibling));return q(e.ownerDocument||e,e),t.nodeType==y&&(t.firstChild=t.lastChild=null),t}function j(){this._nsMap={}}function z(){}function X(){}function Q(){}function G(){}function Y(){}function $(){}function K(){}function Z(){}function J(){}function ee(){}function te(){}function ie(){}function re(e,t){var i=[],r=9==this.nodeType&&this.documentElement||this,n=r.prefix,a=r.namespaceURI;if(a&&null==n&&null==(n=r.lookupPrefix(a)))var o=[{namespace:a,prefix:null}];return oe(this,i,e,t,o),i.join("")}function ne(e,t,i){var n=e.prefix||"",a=e.namespaceURI;if(!a)return!1;if("xml"===n&&a===r.XML||a===r.XMLNS)return!1;for(var o=i.length;o--;){var s=i[o];if(s.prefix===n)return s.namespace!==a}return!0}function ae(e,t,i){e.push(" ",t,'="',i.replace(/[<&"]/g,O),'"')}function oe(e,t,i,n,a){if(a||(a=[]),n){if(!(e=n(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case c:var o=e.attributes,s=o.length,l=e.firstChild,u=e.tagName,v=u;if(!(i=r.isHTML(e.namespaceURI)||i)&&!e.prefix&&e.namespaceURI){for(var E,b=0;b<o.length;b++)if("xmlns"===o.item(b).name){E=o.item(b).value;break}if(E!==e.namespaceURI)for(var N=a.length-1;N>=0;N--){var k=a[N];if(k.namespace===e.namespaceURI){k.prefix&&(v=k.prefix+":"+u);break}}}t.push("<",v);for(var C=0;C<s;C++){"xmlns"==(_=o.item(C)).prefix?a.push({prefix:_.localName,namespace:_.value}):"xmlns"==_.nodeName&&a.push({prefix:"",namespace:_.value})}for(C=0;C<s;C++){var _,R,S;if(ne(_=o.item(C),0,a))ae(t,(R=_.prefix||"")?"xmlns:"+R:"xmlns",S=_.namespaceURI),a.push({prefix:R,namespace:S});oe(_,t,i,n,a)}if(u===v&&ne(e,0,a))ae(t,(R=e.prefix||"")?"xmlns:"+R:"xmlns",S=e.namespaceURI),a.push({prefix:R,namespace:S});if(l||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(u)){if(t.push(">"),i&&/^script$/i.test(u))for(;l;)l.data?t.push(l.data):oe(l,t,i,n,a.slice()),l=l.nextSibling;else for(;l;)oe(l,t,i,n,a.slice()),l=l.nextSibling;t.push("</",v,">")}else t.push("/>");return;case A:case y:for(l=e.firstChild;l;)oe(l,t,i,n,a.slice()),l=l.nextSibling;return;case d:return ae(t,e.name,e.value);case h:return t.push(e.data.replace(/[<&]/g,O).replace(/]]>/g,"]]&gt;"));case p:return t.push("<![CDATA[",e.data,"]]>");case g:return t.push("\x3c!--",e.data,"--\x3e");case T:var w=e.publicId,I=e.systemId;if(t.push("<!DOCTYPE ",e.name),w)t.push(" PUBLIC ",w),I&&"."!=I&&t.push(" ",I),t.push(">");else if(I&&"."!=I)t.push(" SYSTEM ",I,">");else{var L=e.internalSubset;L&&t.push(" [",L,"]"),t.push(">")}return;case f:return t.push("<?",e.target," ",e.data,"?>");case m:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function se(e,t,i){var r;switch(t.nodeType){case c:(r=t.cloneNode(!1)).ownerDocument=e;case y:break;case d:i=!0}if(r||(r=t.cloneNode(!1)),r.ownerDocument=e,r.parentNode=null,i)for(var n=t.firstChild;n;)r.appendChild(se(e,n,i)),n=n.nextSibling;return r}function le(e,t,i){var r=new t.constructor;for(var n in t){var a=t[n];"object"!=typeof a&&a!=r[n]&&(r[n]=a)}switch(t.childNodes&&(r.childNodes=new S),r.ownerDocument=e,r.nodeType){case c:var o=t.attributes,s=r.attributes=new L,l=o.length;s._ownerElement=r;for(var u=0;u<l;u++)r.setAttributeNode(le(e,o.item(u),!0));break;case d:i=!0}if(i)for(var h=t.firstChild;h;)r.appendChild(le(e,h,i)),h=h.nextSibling;return r}function ue(e,t,i){e[t]=i}R.prototype=Error.prototype,s(b,R),S.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var i=[],r=0;r<this.length;r++)oe(this[r],i,e,t);return i.join("")}},w.prototype.item=function(e){return I(this),this[e]},l(w,S),L.prototype={length:0,item:S.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var i=this[t];if(i.nodeName==e)return i}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new R(_);var i=this.getNamedItem(e.nodeName);return x(this._ownerElement,this,e,i),i},setNamedItemNS:function(e){var t,i=e.ownerElement;if(i&&i!=this._ownerElement)throw new R(_);return t=this.getNamedItemNS(e.namespaceURI,e.localName),x(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return V(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var i=this.getNamedItemNS(e,t);return V(this._ownerElement,this,i),i},getNamedItemNS:function(e,t){for(var i=this.length;i--;){var r=this[i];if(r.localName==t&&r.namespaceURI==e)return r}return null}},U.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,i){var r=new F;if(r.implementation=this,r.childNodes=new S,r.doctype=i||null,i&&r.appendChild(i),t){var n=r.createElementNS(e,t);r.appendChild(n)}return r},createDocumentType:function(e,t,i){var r=new $;return r.name=e,r.nodeName=e,r.publicId=t||"",r.systemId=i||"",r}},P.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return W(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return H(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return le(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==h&&e.nodeType==h?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var i=t._nsMap;if(i)for(var r in i)if(i[r]==e)return r;t=t.nodeType==d?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var i=t._nsMap;if(i&&e in i)return i[e];t=t.nodeType==d?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},s(u,P),s(u,P.prototype),F.prototype={nodeName:"#document",nodeType:A,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==y){for(var i=e.firstChild;i;){var r=i.nextSibling;this.insertBefore(i,t),i=r}return e}return null==this.documentElement&&e.nodeType==c&&(this.documentElement=e),W(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),H(this,e)},importNode:function(e,t){return se(this,e,t)},getElementById:function(e){var t=null;return M(this.documentElement,(function(i){if(i.nodeType==c&&i.getAttribute("id")==e)return t=i,!0})),t},getElementsByClassName:function(e){var t=o(e);return new w(this,(function(i){var r=[];return t.length>0&&M(i.documentElement,(function(n){if(n!==i&&n.nodeType===c){var a=n.getAttribute("class");if(a){var s=e===a;if(!s){var l=o(a);s=t.every((u=l,function(e){return u&&-1!==u.indexOf(e)}))}s&&r.push(n)}}var u})),r}))},createElement:function(e){var t=new j;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new S,(t.attributes=new L)._ownerElement=t,t},createDocumentFragment:function(){var e=new ee;return e.ownerDocument=this,e.childNodes=new S,e},createTextNode:function(e){var t=new Q;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new G;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new Y;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var i=new te;return i.ownerDocument=this,i.tagName=i.target=e,i.nodeValue=i.data=t,i},createAttribute:function(e){var t=new z;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new J;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var i=new j,r=t.split(":"),n=i.attributes=new L;return i.childNodes=new S,i.ownerDocument=this,i.nodeName=t,i.tagName=t,i.namespaceURI=e,2==r.length?(i.prefix=r[0],i.localName=r[1]):i.localName=t,n._ownerElement=i,i},createAttributeNS:function(e,t){var i=new z,r=t.split(":");return i.ownerDocument=this,i.nodeName=t,i.name=t,i.namespaceURI=e,i.specified=!0,2==r.length?(i.prefix=r[0],i.localName=r[1]):i.localName=t,i}},l(F,P),j.prototype={nodeType:c,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var i=this.ownerDocument.createAttribute(e);i.value=i.nodeValue=""+t,this.setAttributeNode(i)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===y?this.insertBefore(e,null):function(e,t){var i=t.parentNode;if(i){var r=e.lastChild;i.removeChild(t),r=e.lastChild}return r=e.lastChild,t.parentNode=e,t.previousSibling=r,t.nextSibling=null,r?r.nextSibling=t:e.firstChild=t,e.lastChild=t,q(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var i=this.getAttributeNodeNS(e,t);i&&this.removeAttributeNode(i)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var i=this.getAttributeNodeNS(e,t);return i&&i.value||""},setAttributeNS:function(e,t,i){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+i,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new w(this,(function(t){var i=[];return M(t,(function(r){r===t||r.nodeType!=c||"*"!==e&&r.tagName!=e||i.push(r)})),i}))},getElementsByTagNameNS:function(e,t){return new w(this,(function(i){var r=[];return M(i,(function(n){n===i||n.nodeType!==c||"*"!==e&&n.namespaceURI!==e||"*"!==t&&n.localName!=t||r.push(n)})),r}))}},F.prototype.getElementsByTagName=j.prototype.getElementsByTagName,F.prototype.getElementsByTagNameNS=j.prototype.getElementsByTagNameNS,l(j,P),z.prototype.nodeType=d,l(z,P),X.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(N[k])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,i){i=this.data.substring(0,e)+i+this.data.substring(e+t),this.nodeValue=this.data=i,this.length=i.length}},l(X,P),Q.prototype={nodeName:"#text",nodeType:h,splitText:function(e){var t=this.data,i=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(i);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},l(Q,X),G.prototype={nodeName:"#comment",nodeType:g},l(G,X),Y.prototype={nodeName:"#cdata-section",nodeType:p},l(Y,X),$.prototype.nodeType=T,l($,P),K.prototype.nodeType=E,l(K,P),Z.prototype.nodeType=v,l(Z,P),J.prototype.nodeType=m,l(J,P),ee.prototype.nodeName="#document-fragment",ee.prototype.nodeType=y,l(ee,P),te.prototype.nodeType=f,l(te,P),ie.prototype.serializeToString=function(e,t,i){return re.call(e,t,i)},P.prototype.toString=re;try{if(Object.defineProperty){function ce(e){switch(e.nodeType){case c:case y:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(ce(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(w.prototype,"length",{get:function(){return I(this),this.$$length}}),Object.defineProperty(P.prototype,"textContent",{get:function(){return ce(this)},set:function(e){switch(this.nodeType){case c:case y:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),ue=function(e,t,i){e["$$"+t]=i}}}catch(e){}t.DOMImplementation=U},791:(e,t,i)=>{var r=i(125).freeze;t.XML_ENTITIES=r({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=r({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",times:"×",divide:"÷",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",euro:"€",trade:"™",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"}),t.entityMap=t.HTML_ENTITIES},275:(e,t,i)=>{var r=i(125).NAMESPACE,n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,a=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),o=new RegExp("^"+n.source+a.source+"*(?::"+n.source+a.source+"*)?$");function s(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,s)}function l(){}function u(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function c(e,t,i,n,a,o){function s(e,t,r){e in i.attributeNames&&o.fatalError("Attribute "+e+" redefined"),i.addValue(e,t,r)}for(var l,u=++t,c=0;;){var d=e.charAt(u);switch(d){case"=":if(1===c)l=e.slice(t,u),c=3;else{if(2!==c)throw new Error("attribute equal must after attrName");c=3}break;case"'":case'"':if(3===c||1===c){if(1===c&&(o.warning('attribute value must after "="'),l=e.slice(t,u)),t=u+1,!((u=e.indexOf(d,t))>0))throw new Error("attribute value no end '"+d+"' match");s(l,h=e.slice(t,u).replace(/&#?\w+;/g,a),t-1),c=5}else{if(4!=c)throw new Error('attribute value must after "="');s(l,h=e.slice(t,u).replace(/&#?\w+;/g,a),t),o.warning('attribute "'+l+'" missed start quot('+d+")!!"),t=u+1,c=5}break;case"/":switch(c){case 0:i.setTagName(e.slice(t,u));case 5:case 6:case 7:c=7,i.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),0==c&&i.setTagName(e.slice(t,u)),u;case">":switch(c){case 0:i.setTagName(e.slice(t,u));case 5:case 6:case 7:break;case 4:case 1:"/"===(h=e.slice(t,u)).slice(-1)&&(i.closed=!0,h=h.slice(0,-1));case 2:2===c&&(h=l),4==c?(o.warning('attribute "'+h+'" missed quot(")!'),s(l,h.replace(/&#?\w+;/g,a),t)):(r.isHTML(n[""])&&h.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+h+'" missed value!! "'+h+'" instead!!'),s(h,h,t));break;case 3:throw new Error("attribute value missed!!")}return u;case"":d=" ";default:if(d<=" ")switch(c){case 0:i.setTagName(e.slice(t,u)),c=6;break;case 1:l=e.slice(t,u),c=2;break;case 4:var h=e.slice(t,u).replace(/&#?\w+;/g,a);o.warning('attribute "'+h+'" missed quot(")!!'),s(l,h,t);case 5:c=6}else switch(c){case 2:i.tagName;r.isHTML(n[""])&&l.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+l+'" missed value!! "'+l+'" instead2!!'),s(l,l,t),t=u,c=1;break;case 5:o.warning('attribute space is required"'+l+'"!!');case 6:c=1,t=u;break;case 3:c=4,t=u;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function d(e,t,i){for(var n=e.tagName,a=null,o=e.length;o--;){var s=e[o],l=s.qName,u=s.value;if((p=l.indexOf(":"))>0)var c=s.prefix=l.slice(0,p),d=l.slice(p+1),h="xmlns"===c&&d;else d=l,c=null,h="xmlns"===l&&"";s.localName=d,!1!==h&&(null==a&&(a={},m(i,i={})),i[h]=a[h]=u,s.uri=r.XMLNS,t.startPrefixMapping(h,u))}for(o=e.length;o--;){(c=(s=e[o]).prefix)&&("xml"===c&&(s.uri=r.XML),"xmlns"!==c&&(s.uri=i[c||""]))}var p;(p=n.indexOf(":"))>0?(c=e.prefix=n.slice(0,p),d=e.localName=n.slice(p+1)):(c=null,d=e.localName=n);var v=e.uri=i[c||""];if(t.startElement(v,d,n,e),!e.closed)return e.currentNSMap=i,e.localNSMap=a,!0;if(t.endElement(v,d,n),a)for(c in a)t.endPrefixMapping(c)}function h(e,t,i,r,n){if(/^(?:script|textarea)$/i.test(i)){var a=e.indexOf("</"+i+">",t),o=e.substring(t+1,a);if(/[&<]/.test(o))return/^script$/i.test(i)?(n.characters(o,0,o.length),a):(o=o.replace(/&#?\w+;/g,r),n.characters(o,0,o.length),a)}return t+1}function p(e,t,i,r){var n=r[i];return null==n&&((n=e.lastIndexOf("</"+i+">"))<t&&(n=e.lastIndexOf("</"+i)),r[i]=n),n<t}function m(e,t){for(var i in e)t[i]=e[i]}function v(e,t,i,r){if("-"===e.charAt(t+2))return"-"===e.charAt(t+3)?(n=e.indexOf("--\x3e",t+4))>t?(i.comment(e,t+4,n-t-4),n+3):(r.error("Unclosed comment"),-1):-1;if("CDATA["==e.substr(t+3,6)){var n=e.indexOf("]]>",t+9);return i.startCDATA(),i.characters(e,t+9,n-t-9),i.endCDATA(),n+3}var a=function(e,t){var i,r=[],n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;n.lastIndex=t,n.exec(e);for(;i=n.exec(e);)if(r.push(i),i[1])return r}(e,t),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var s=a[1][0],l=!1,u=!1;o>3&&(/^public$/i.test(a[2][0])?(l=a[3][0],u=o>4&&a[4][0]):/^system$/i.test(a[2][0])&&(u=a[3][0]));var c=a[o-1];return i.startDTD(s,l,u),i.endDTD(),c.index+c[0].length}return-1}function f(e,t,i){var r=e.indexOf("?>",t);if(r){var n=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(n){n[0].length;return i.processingInstruction(n[1],n[2]),r+2}return-1}return-1}function g(){this.attributeNames={}}s.prototype=new Error,s.prototype.name=s.name,l.prototype={parse:function(e,t,i){var n=this.domBuilder;n.startDocument(),m(t,t={}),function(e,t,i,n,a){function o(e){if(e>65535){var t=55296+((e-=65536)>>10),i=56320+(1023&e);return String.fromCharCode(t,i)}return String.fromCharCode(e)}function l(e){var t=e.slice(1,-1);return t in i?i[t]:"#"===t.charAt(0)?o(parseInt(t.substr(1).replace("x","0x"))):(a.error("entity not found:"+e),e)}function m(t){if(t>C){var i=e.substring(C,t).replace(/&#?\w+;/g,l);b&&A(C),n.characters(i,0,t-C),C=t}}function A(t,i){for(;t>=y&&(i=E.exec(e));)T=i.index,y=T+i[0].length,b.lineNumber++;b.columnNumber=t-T+1}var T=0,y=0,E=/.*(?:\r\n?|\n)|.*$/g,b=n.locator,N=[{currentNSMap:t}],k={},C=0;for(;;){try{var _=e.indexOf("<",C);if(_<0){if(!e.substr(C).match(/^\s*$/)){var R=n.doc,S=R.createTextNode(e.substr(C));R.appendChild(S),n.currentElement=S}return}switch(_>C&&m(_),e.charAt(_+1)){case"/":var w=e.indexOf(">",_+3),I=e.substring(_+2,w).replace(/[ \t\n\r]+$/g,""),L=N.pop();w<0?(I=e.substring(_+2).replace(/[\s<].*/,""),a.error("end tag name: "+I+" is not complete:"+L.tagName),w=_+1+I.length):I.match(/\s</)&&(I=I.replace(/[\s<].*/,""),a.error("end tag name: "+I+" maybe not complete"),w=_+1+I.length);var D=L.localNSMap,x=L.tagName==I;if(x||L.tagName&&L.tagName.toLowerCase()==I.toLowerCase()){if(n.endElement(L.uri,L.localName,I),D)for(var V in D)n.endPrefixMapping(V);x||a.fatalError("end tag name: "+I+" is not match the current start tagName:"+L.tagName)}else N.push(L);w++;break;case"?":b&&A(_),w=f(e,_,n);break;case"!":b&&A(_),w=v(e,_,n,a);break;default:b&&A(_);var U=new g,P=N[N.length-1].currentNSMap,O=(w=c(e,_,U,P,l,a),U.length);if(!U.closed&&p(e,w,U.tagName,k)&&(U.closed=!0,i.nbsp||a.warning("unclosed xml attribute")),b&&O){for(var M=u(b,{}),F=0;F<O;F++){var B=U[F];A(B.offset),B.locator=u(b,{})}n.locator=M,d(U,n,P)&&N.push(U),n.locator=b}else d(U,n,P)&&N.push(U);r.isHTML(U.uri)&&!U.closed?w=h(e,w,U.tagName,l,n):w++}}catch(e){if(e instanceof s)throw e;a.error("element parse error: "+e),w=-1}w>C?C=w:m(Math.max(_,C)+1)}}(e,t,i,n,this.errorHandler),n.endDocument()}},g.prototype={setTagName:function(e){if(!o.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,i){if(!o.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:i}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},t.XMLReader=l,t.ParseError=s},147:e=>{"use strict";e.exports=require("fs")},685:e=>{"use strict";e.exports=require("http")},687:e=>{"use strict";e.exports=require("https")},310:e=>{"use strict";e.exports=require("url")}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,i),a.exports}i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=i(409);const t=function(e){if(!(e instanceof Element||e instanceof HTMLDocument))throw new Error("ad container is not defined");this._adContainer=e,this._slot=null,this._videoSlot=null,this.createSlot(),this.EVENTS={AdsManagerLoaded:"AdsManagerLoaded",AdStarted:"AdStarted",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdLoaded:"AdLoaded",AdLinearChange:"AdLinearChange",AdSizeChange:"AdSizeChange",AdExpandedChange:"AdExpandedChange",AdSkippableStateChange:"AdSkippableStateChange",AdDurationChange:"AdDurationChange",AdRemainingTimeChange:"AdRemainingTimeChange",AdVolumeChange:"AdVolumeChange",AdImpression:"AdImpression",AdClickThru:"AdClickThru",AdInteraction:"AdInteraction",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdUserAcceptInvitation:"AdUserAcceptInvitation",AdUserMinimize:"AdUserMinimize",AdUserClose:"AdUserClose",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdError:"AdError",AdLog:"AdLog",AllAdsCompleted:"AllAdsCompleted"},this._eventCallbacks={},this._creativeEventCallbacks={},this._attributes={width:300,height:154,viewMode:"normal",desiredBitrate:268,duration:10,remainingTime:10,currentTime:0,volume:0},this._vastClient=null,this._vastParser=null,this._vastTracker=null,this._ad=null,this._creative=null,this._mediaFiles=null,this._mediaFileIndex=0,this._mediaFile=null,this._isVPAID=!1,this._vpaidCreative=null,this._vpaidProgressCounter=null,this.SUPPORTED_CREATIVE_VPAID_VERSION_MIN=2,this._nextQuartileIndex=0,this._hasImpression=!1,this._hasStarted=!1};t.prototype.createSlot=function(){this._slot=document.createElement("div"),this._slot.style.position="absolute",this._slot.style.display="none",this._adContainer.appendChild(this._slot),this.createVideoSlot()},t.prototype.removeSlot=function(){this._slot.parentNode.removeChild(this._slot),this.createSlot()},t.prototype.showSlot=function(){""===this._videoSlot.src&&this.hideVideoSlot(),this._slot.style.display="block"},t.prototype.resizeSlot=function(e,t){this._slot.style.width=e+"px",this._slot.style.height=t+"px"},t.prototype.createVideoSlot=function(){this._videoSlot=document.createElement("video"),this._videoSlot.setAttribute("webkit-playsinline",!0),this._videoSlot.setAttribute("playsinline",!0),this._videoSlot.style.width="100%",this._videoSlot.style.height="100%",this._videoSlot.style.backgroundColor="rgb(0, 0, 0)",this._slot.appendChild(this._videoSlot)},t.prototype.hideVideoSlot=function(){this._videoSlot.style.display="none"},t.prototype.updateVPAIDProgress=function(){this._attributes.remainingTime=this._isCreativeFunctionInvokable("getAdRemainingTime")?this._vpaidCreative.getAdRemainingTime():-1,isNaN(this._attributes.remainingTime)||1===this._attributes.remainingTime||(this._attributes.currentTime=this._attributes.duration-this._attributes.remainingTime,this._vastTracker.setProgress(this._attributes.currentTime))},t.prototype.startVPAIDProgress=function(){this._vpaidProgressCounter&&(clearInterval(this._vpaidProgressCounter),this._vpaidProgressCounter=null),this._vpaidProgressCounter=setInterval((()=>{this._isVPAID&&this._vpaidCreative&&this._vastTracker?this.updateVPAIDProgress():this.stopVPAIDProgress()}),1e3)},t.prototype.stopVPAIDProgress=function(){this._vpaidProgressCounter&&(clearInterval(this._vpaidProgressCounter),this._vpaidProgressCounter=null)},t.prototype.addEventListener=function(e,t,i){const r=t.bind(i);this._eventCallbacks[e]=r},t.prototype.removeEventListener=function(e){this._eventCallbacks[e]=null},t.prototype.onAdsManagerLoaded=function(){this.EVENTS.AdsManagerLoaded in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdsManagerLoaded]&&this._eventCallbacks[this.EVENTS.AdsManagerLoaded]()},t.prototype.onAdLoaded=function(){this.EVENTS.AdLoaded in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdLoaded]&&this._eventCallbacks[this.EVENTS.AdLoaded](this._creative)},t.prototype.onAdDurationChange=function(){this._isVPAID&&this._vpaidCreative&&this._vastTracker&&(this._attributes.duration=this._isCreativeFunctionInvokable("getAdDuration")?this._vpaidCreative.getAdDuration():-1,-1!==this._attributes.duration&&this._vastTracker.setDuration(this._attributes.duration)),this.EVENTS.AdDurationChange in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdDurationChange]&&this._eventCallbacks[this.EVENTS.AdDurationChange]()},t.prototype.onAdSizeChange=function(){this.EVENTS.AdSizeChange in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdSizeChange]&&this._eventCallbacks[this.EVENTS.AdSizeChange]()},t.prototype.onAdStarted=function(){this.showSlot(),this.EVENTS.AdStarted in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdStarted]&&this._eventCallbacks[this.EVENTS.AdStarted]()},t.prototype.onAdVideoStart=function(){this._isVPAID&&this._vpaidCreative&&this._vastTracker&&this.updateVPAIDProgress(),this.EVENTS.AdVideoStart in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdVideoStart]&&this._eventCallbacks[this.EVENTS.AdVideoStart]()},t.prototype.onAdStopped=function(){this.EVENTS.AdStopped in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdStopped]&&this._eventCallbacks[this.EVENTS.AdStopped](),this.destroyAd()},t.prototype.onAdSkipped=function(){this.EVENTS.AdSkipped in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdSkipped]&&this._eventCallbacks[this.EVENTS.AdSkipped](),this.destroyAd()},t.prototype.onAdVolumeChange=function(){this.EVENTS.AdVolumeChange in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdVolumeChange]&&this._eventCallbacks[this.EVENTS.AdVolumeChange]()},t.prototype.onAdImpression=function(){this._isVPAID&&this._vpaidCreative&&this._vastTracker&&(this._hasImpression||(this._attributes.duration=this._isCreativeFunctionInvokable("getAdDuration")?this._vpaidCreative.getAdDuration():-1,-1!==this._attributes.duration&&this._vastTracker.setDuration(this._attributes.duration),this._vastTracker.trackImpression(),this.startVPAIDProgress(),this._hasImpression=!0)),this.EVENTS.AdImpression in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdImpression]&&this._eventCallbacks[this.EVENTS.AdImpression]()},t.prototype.onAdClickThru=function(e,t,i){this._isVPAID&&this._vpaidCreative&&this._vastTracker&&this._vastTracker.click(),this.EVENTS.AdClickThru in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdClickThru]&&this._eventCallbacks[this.EVENTS.AdClickThru](e,t,i)},t.prototype.onAdVideoFirstQuartile=function(){this._isVPAID&&this._vpaidCreative&&this._vastTracker&&this.updateVPAIDProgress(),this.EVENTS.AdVideoFirstQuartile in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdVideoFirstQuartile]&&this._eventCallbacks[this.EVENTS.AdVideoFirstQuartile]()},t.prototype.onAdVideoMidpoint=function(){this._isVPAID&&this._vpaidCreative&&this._vastTracker&&this.updateVPAIDProgress(),this.EVENTS.AdVideoMidpoint in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdVideoMidpoint]&&this._eventCallbacks[this.EVENTS.AdVideoMidpoint]()},t.prototype.onAdVideoThirdQuartile=function(){this._isVPAID&&this._vpaidCreative&&this._vastTracker&&this.updateVPAIDProgress(),this.EVENTS.AdVideoThirdQuartile in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdVideoThirdQuartile]&&this._eventCallbacks[this.EVENTS.AdVideoThirdQuartile]()},t.prototype.onAdPaused=function(){this._vastTracker&&this._vastTracker.setPaused(!0),this.EVENTS.AdPaused in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdPaused]&&this._eventCallbacks[this.EVENTS.AdPaused]()},t.prototype.onAdPlaying=function(){this._vastTracker&&this._vastTracker.setPaused(!1),this.EVENTS.AdPlaying in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdPlaying]&&this._eventCallbacks[this.EVENTS.AdPlaying]()},t.prototype.onAdVideoComplete=function(){this._isVPAID&&this._vpaidCreative&&this._vastTracker&&this._vastTracker.complete(),this.EVENTS.AdVideoComplete in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdVideoComplete]&&this._eventCallbacks[this.EVENTS.AdVideoComplete]()},t.prototype.onAllAdsCompleted=function(){this.EVENTS.AllAdsCompleted in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AllAdsCompleted]&&this._eventCallbacks[this.EVENTS.AllAdsCompleted]()},t.prototype.onAdError=function(e){this.EVENTS.AdError in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdError]&&this._eventCallbacks[this.EVENTS.AdError](e)},t.prototype.onAdLog=function(e){this.EVENTS.AdLog in this._eventCallbacks&&"function"==typeof this._eventCallbacks[this.EVENTS.AdLog]&&this._eventCallbacks[this.EVENTS.AdLog](e)},t.prototype.processVASTResponse=function(t){var i=t.ads;0!=i.length?i.length>1?this.onAdsManagerLoaded():(this._ad=i[0],this._creative=i[0].creatives.filter((e=>"linear"===e.type))[0],this._creative&&0!=this._creative.mediaFiles.length&&(this._mediaFiles=this._creative.mediaFiles.filter((e=>this.canPlayVideoType(e.mimeType)||"application/javascript"===e.mimeType?e:void 0)),this._mediaFiles.sort((function(e,t){let i=e.height,r=t.height;return i<r?-1:i>r?1:0})),this._mediaFiles&&0!=this._mediaFiles.length&&(this._vastTracker=new e.BD(null,this._ad,this._creative),this._vastTracker.load(),this.onAdsManagerLoaded()))):this.onAdError("The VAST response document is empty.")},t.prototype.requestAds=function(t,i={}){if(this.destroy(),t&&"string"==typeof t){let r=!1;try{new URL(t),r=!0}catch(e){}if(r)this._vastClient=new e.WN,this._vastClient.get(t,i).then((e=>{this.processVASTResponse(e)})).catch((e=>{this.onAdError(e.message)}));else{const r=(new window.DOMParser).parseFromString(t,"text/xml");this._vastParser=new e.OF,this._vastParser.parseVAST(r,i).then((e=>{this.processVASTResponse(e)})).catch((e=>{this.onAdError(e.message)}))}}else this.onAdError("VAST URL/XML is empty")},t.prototype.canPlayVideoType=function(e){return!("video/webm"!==e||!this.supportsWebmVideo())||(!("video/ogg"!==e||!this.supportsOggTheoraVideo())||!("video/mp4"!==e||!this.supportsH264BaselineVideo()))},t.prototype.supportsVideo=function(){return!!document.createElement("video").canPlayType},t.prototype.supportsH264BaselineVideo=function(){return!!this.supportsVideo()&&document.createElement("video").canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')},t.prototype.supportsOggTheoraVideo=function(){return!!this.supportsVideo()&&document.createElement("video").canPlayType('video/ogg; codecs="theora, vorbis"')},t.prototype.supportsWebmVideo=function(){return!!this.supportsVideo()&&document.createElement("video").canPlayType('video/webm; codecs="vp8, vorbis"')},t.prototype.handshakeVersion=function(e){return this._vpaidCreative.handshakeVersion(e)},t.prototype._isCreativeFunctionInvokable=function(e){return!!this._vpaidCreative&&((e=this._vpaidCreative[e])&&"function"==typeof e)},t.prototype.checkVPAIDInterface=function(e){for(var t={passed:!0,missingInterfaces:""},i=e.length-1;0<=i;i--)this._isCreativeFunctionInvokable(e[i])||(t.passed=!1,t.missingInterfaces+=e[i]+" ");return t},t.prototype.setCallbacksForCreative=function(e,t){for(var i in e)e.hasOwnProperty(i)&&this._vpaidCreative.subscribe(e[i],i,t)},t.prototype.removeCallbacksForCreative=function(e){for(var t in e)e.hasOwnProperty(t)&&this._vpaidCreative.unsubscribe(t)},t.prototype.creativeAssetLoaded=function(){var e,t=this;if((e=t.checkVPAIDInterface("handshakeVersion initAd startAd stopAd subscribe unsubscribe getAdLinear".split(" "))).passed||t.onAdError("Missing interfaces in the VPAID creative: "+e.missingInterfaces),e.passed&&function(){var e=t.handshakeVersion(t.SUPPORTED_CREATIVE_VPAID_VERSION_MIN.toFixed(1));return e?!(parseFloat(e)<t.SUPPORTED_CREATIVE_VPAID_VERSION_MIN)||(t.onAdError("Only support creatives with VPAID version >= "+t.SUPPORTED_CREATIVE_VPAID_VERSION_MIN.toFixed(1)),!1):(t.onAdError("Cannot get VPAID version from the creative"),!1)}()){this._creativeEventCallbacks={AdStarted:this.onAdStarted,AdStopped:this.onAdStopped,AdSkipped:this.onAdSkipped,AdLoaded:this.onAdLoaded,AdSizeChange:this.onAdSizeChange,AdDurationChange:this.onAdDurationChange,AdVolumeChange:this.onAdVolumeChange,AdImpression:this.onAdImpression,AdClickThru:this.onAdClickThru,AdVideoStart:this.onAdVideoStart,AdVideoFirstQuartile:this.onAdVideoFirstQuartile,AdVideoMidpoint:this.onAdVideoMidpoint,AdVideoThirdQuartile:this.onAdVideoThirdQuartile,AdVideoComplete:this.onAdVideoComplete,AdPaused:this.onAdPaused,AdPlaying:this.onAdPlaying,AdError:this.onAdError,AdLog:this.onAdLog},this.setCallbacksForCreative(this._creativeEventCallbacks,this);var i=this._attributes.width,r=this._attributes.height,n={AdParameters:this._creative.adParameters};const e={slot:this._slot,videoSlot:this._videoSlot,videoSlotCanAutoPlay:!0};this._vpaidCreative.initAd(i,r,this._attributes.viewMode,this._attributes.desiredBitrate,n,e)}},t.prototype.loadCreativeAsset=function(e){const t=document.getElementById("vpaidIframe"),i=document.createElement("iframe");i.id="vpaidIframe",null==t?document.body.appendChild(i):document.body.replaceChild(i,t),i.width=0,i.height=0,i.style.display="none",i.setAttribute("allowfullscreen",""),i.setAttribute("sandbox","allow-scripts allow-same-origin"),i.setAttribute("allow","autoplay;"),i.tabIndex=-1,i.contentWindow.document.open(),i.contentWindow.document.write('<script type="text/javascript" src="'+e+'"> <\/script>'),i.contentWindow.document.close(),this._loadIntervalTimer=setInterval((()=>{let e=document.getElementById("vpaidIframe").contentWindow.getVPAIDAd;e&&"function"==typeof e&&(clearInterval(this._loadIntervalTimer),e=e(),void 0===e||null==e||(this._vpaidCreative=e,this.creativeAssetLoaded()))}),200)},t.prototype.removeCreativeAsset=function(){var e=document.getElementById("vpaidIframe");e&&e.parentNode.removeChild(e)},t.prototype.destroyAd=function(){this.destroy(),this.onAllAdsCompleted()},t.prototype.isCreativeExists=function(){return this._creative&&0!=this._creative.mediaFiles.length},t.prototype.init=function(e,t,i){var r=this;this.isCreativeExists()?(this._mediaFileIndex=this._mediaFiles.findIndex((function(e){return e.height>=t})),-1!=this._mediaFileIndex?this._mediaFile=this._mediaFiles[this._mediaFileIndex]:this._mediaFile=this._mediaFiles[this._mediaFiles.length-1],this._mediaFile&&("application/javascript"===this._mediaFile.mimeType&&(this._isVPAID=!0),this._attributes.width=e,this._attributes.height=t,this._attributes.viewMode=i,this.resizeSlot(this._attributes.width,this._attributes.height),this._isVPAID?this.loadCreativeAsset(this._mediaFile.fileURL):(this._videoSlot.setAttribute("src",this._mediaFile.fileURL),this._slot.addEventListener("click",(function(){!r._isVPAID&&r._vastTracker&&r._vastTracker.click()}),!1),this._videoSlot.addEventListener("canplay",(function(){}),!1),this._videoSlot.addEventListener("volumechange",(function(e){r._vastTracker&&r._vastTracker.setMuted(e.target.muted)}),!1),this._videoSlot.addEventListener("timeupdate",(function(e){r.isCreativeExists()&&(100*e.target.currentTime/e.target.duration>=0&&(r._hasImpression||(r._vastTracker&&r._vastTracker.trackImpression(),r._hasImpression=!0)),r._vastTracker&&r._vastTracker.setProgress(e.target.currentTime),e.target.duration>0&&(r._attributes.remainingTime=e.target.duration-e.target.currentTime))}),!0),this._videoSlot.addEventListener("loadedmetadata",(function(e){r._attributes.duration=e.target.duration,r._vastTracker&&r._vastTracker.setDuration(e.target.duration),r._isVPAID||r.onAdDurationChange()}),!1),this._videoSlot.addEventListener("ended",(function(){r._vastTracker&&r._vastTracker.complete()}),!1),this.onAdLoaded()),this._vastTracker&&(this._vastTracker.on("clickthrough",(function(e){r._isVPAID||r.onAdClickThru(e);const t=window.open(e,"_blank");void 0!==t?t.focus():window.location.href=e})),this._vastTracker.on("creativeView",(()=>{r._isVPAID||r.onAdImpression()})),this._vastTracker.on("start",(()=>{r._isVPAID||r.onAdVideoStart()})),this._vastTracker.on("firstQuartile",(()=>{r._isVPAID||r.onAdVideoFirstQuartile()})),this._vastTracker.on("midpoint",(()=>{r._isVPAID||r.onAdVideoMidpoint()})),this._vastTracker.on("thirdQuartile",(()=>{r._isVPAID||r.onAdVideoThirdQuartile()})),this._vastTracker.on("complete",(()=>{r._isVPAID||(r.onAdVideoComplete(),r.onAdStopped())}))))):this.onAdError("")},t.prototype.start=function(){this.isCreativeExists()&&(this._videoSlot.muted=!0,this._isVPAID?this._isCreativeFunctionInvokable("startAd")&&this._vpaidCreative.startAd():(this._videoSlot.load(),this._videoSlot.play(),this.onAdStarted()))},t.prototype.getDuration=function(){return this.isCreativeExists()&&this._attributes.duration},t.prototype.pause=function(){this.isCreativeExists()&&(this._isVPAID?this._isCreativeFunctionInvokable("pauseAd")&&this._vpaidCreative.pauseAd():(this._videoSlot.pause(),this.onAdPaused()))},t.prototype.resume=function(){this.isCreativeExists()&&(this._isVPAID?this._isCreativeFunctionInvokable("resumeAd")&&this._vpaidCreative.resumeAd():(this._videoSlot.play(),this.onAdPlaying()))},t.prototype.stop=function(){this.isCreativeExists()&&(this._isVPAID?this._isCreativeFunctionInvokable("stopAd")&&this._vpaidCreative.stopAd():this.onAdStopped())},t.prototype.skip=function(){this.isCreativeExists()&&(this._isVPAID?this._isCreativeFunctionInvokable("skipAd")&&this._vpaidCreative.skipAd():this.onAdSkipped())},t.prototype.resize=function(e,t,i){this.isCreativeExists()&&(this._attributes.width=e,this._attributes.height=t,this._attributes.viewMode=i,this.resizeSlot(this._attributes.width,this._attributes.height),this._isVPAID?this._isCreativeFunctionInvokable("resizeAd")&&this._vpaidCreative.resizeAd(e,t,i):this.onAdSizeChange())},t.prototype.getVolume=function(){if(this.isCreativeExists())return this._isVPAID?this._isCreativeFunctionInvokable("getAdVolume")?this._vpaidCreative.getAdVolume():-1:this._videoSlot.volume},t.prototype.setVolume=function(e){if(this.isCreativeExists())if(this._isVPAID)this._isCreativeFunctionInvokable("setAdVolume")&&this._vpaidCreative.setAdVolume(e);else{e!==this._videoSlot.volume&&(this._attributes.volume=e,this._videoSlot.volume=e,this.onAdVolumeChange())}},t.prototype.getRemainingTime=function(){if(this.isCreativeExists())return this._isVPAID?this._isCreativeFunctionInvokable("getAdRemainingTime")?this._vpaidCreative.getAdRemainingTime():-1:this._attributes.remainingTime},t.prototype.collapse=function(){this.isCreativeExists()},t.prototype.expand=function(){this.isCreativeExists()},t.prototype.destroy=function(){this.isCreativeExists(),this._isVPAID&&(this.removeCallbacksForCreative(this._creativeEventCallbacks),this.removeCreativeAsset()),this._isVPAID=!1,this._hasImpression=!1,this._hasStarted=!1,this._ad=null,this._creative=null,this._mediaFile=null,this._vpaidCreative=null,this._vastTracker=null,this.removeSlot()}})()})();